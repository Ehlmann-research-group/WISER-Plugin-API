<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Tools-Menu Plugins &#8212; Extending WISER  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=12dfc556" />
    <script src="_static/documentation_options.js?v=5929fcd5"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="canonical" href="https://ehlmann-research-group.github.io/WISER-Plugin-API/toolsmenu_plugins.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="GUI Plugins in WISER" href="ui_plugins.html" />
    <link rel="prev" title="Context-Menu Plugins" href="ctxmenu_plugins.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="tools-menu-plugins">
<h1>Tools-Menu Plugins<a class="headerlink" href="#tools-menu-plugins" title="Link to this heading">¶</a></h1>
<p>Tools-menu plugins allow you to add custom actions to the Tool Menu located in the top navigation bar.
Each plugin appears using the name you provide, and selecting it triggers the function you have linked
to that action.</p>
<p>If you have actions that are used less frequently, consider organizing them into a submenu to keep the
main Tool Menu concise and easy to navigate.</p>
<dl class="py class">
<dt class="sig sig-object py" id="wiser.plugins.ToolsMenuPlugin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">wiser.plugins.</span></span><span class="sig-name descname"><span class="pre">ToolsMenuPlugin</span></span><a class="reference internal" href="_modules/wiser/plugins/types.html#ToolsMenuPlugin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#wiser.plugins.ToolsMenuPlugin" title="Link to this definition">¶</a></dt>
<dd><p>This is the base type for plugins that integrate into the WISER “Tools”
application-menu.</p>
<dl class="py method">
<dt class="sig sig-object py" id="wiser.plugins.ToolsMenuPlugin.add_tool_menu_items">
<span class="sig-name descname"><span class="pre">add_tool_menu_items</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tool_menu</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">QMenu</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wiser</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="wiser_state.html#wiser.gui.app_state.ApplicationState" title="wiser.gui.app_state.ApplicationState"><span class="pre">ApplicationState</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="_modules/wiser/plugins/types.html#ToolsMenuPlugin.add_tool_menu_items"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#wiser.plugins.ToolsMenuPlugin.add_tool_menu_items" title="Link to this definition">¶</a></dt>
<dd><p>This method is called by WISER to allow plugins to add menu actions or
submenus into the Tools application menu.</p>
<p>If a plugin provides multiple actions, the developer has several
choices.  If all actions are useful and expected to be invoked
regularly, the actions can be added directly to the Tools menu.  If
some actions are used much less frequently, it is recommended that
these actions be put into a submenu, to keep the Tools menu from
becoming too cluttered.</p>
<p>Use QMenu.addAction() to add individual actions, or QMenu.addMenu() to
add sub-menus to the Tools menu.</p>
</dd></dl>

</dd></dl>

<section id="example-tools-menu-plugin">
<h2>Example Tools-Menu Plugin<a class="headerlink" href="#example-tools-menu-plugin" title="Link to this heading">¶</a></h2>
<p>Okay, lets get into an example plugin.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">wiser.plugins</span><span class="w"> </span><span class="kn">import</span> <span class="n">ToolsMenuPlugin</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">PySide2.QtWidgets</span><span class="w"> </span><span class="kn">import</span> <span class="n">QMenu</span><span class="p">,</span> <span class="n">QMessageBox</span>


<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">HelloToolPlugin</span><span class="p">(</span><span class="n">ToolsMenuPlugin</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A simple &quot;Hello world!&quot; example of a Tools plugin.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_tool_menu_items</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tool_menu</span><span class="p">:</span> <span class="n">QMenu</span><span class="p">,</span> <span class="n">wiser</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Use QMenu.addAction() to add individual actions, or QMenu.addMenu() to</span>
<span class="sd">        add sub-menus to the Tools menu.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;HelloToolPlugin is adding tool-menu items&quot;</span><span class="p">)</span>
        <span class="n">act</span> <span class="o">=</span> <span class="n">tool_menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="s2">&quot;Say hello...&quot;</span><span class="p">)</span>
        <span class="n">act</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">say_hello</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_app_state</span> <span class="o">=</span> <span class="n">wiser</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">say_hello</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">checked</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="c1"># logger.info(&quot;HelloToolPlugin.say_hello() was called!&quot;)</span>
        <span class="c1"># QMessageBox.information(None, &quot;Hello-Tool Plugin&quot;, &quot;Hello from the toolbar!&quot;)</span>

        <span class="n">app_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_app_state</span>

        <span class="n">band</span> <span class="o">=</span> <span class="n">app_state</span><span class="o">.</span><span class="n">choose_band_ui</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">band</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;name: </span><span class="si">{</span><span class="n">band</span><span class="o">.</span><span class="n">get_band_index</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">dataset</span> <span class="o">=</span> <span class="n">app_state</span><span class="o">.</span><span class="n">choose_dataset_ui</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">dataset</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;name: </span><span class="si">{</span><span class="n">dataset</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># spectrum = app_state.choose_spectrum_ui()</span>
        <span class="c1"># if spectrum:</span>
        <span class="c1">#     print(f&quot;name: {spectrum.get_name()}&quot;)</span>

        <span class="c1"># roi = app_state.choose_roi_ui()</span>
        <span class="c1"># if roi:</span>
        <span class="c1">#     print(f&quot;name: {roi.get_name()}&quot;)</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">wiser.raster.spectrum</span><span class="w"> </span><span class="kn">import</span> <span class="n">SpectrumAverageMode</span><span class="p">,</span> <span class="n">calc_roi_spectrum</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ExampleToolPlugin</span><span class="p">(</span><span class="n">ToolsMenuPlugin</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_tool_menu_items</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tool_menu</span><span class="p">:</span> <span class="n">QMenu</span><span class="p">,</span> <span class="n">wiser</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Use QMenu.addAction() to add individual actions, or QMenu.addMenu() to</span>
<span class="sd">        add sub-menus to the Tools menu.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">act</span> <span class="o">=</span> <span class="n">tool_menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="s2">&quot;ROI Angle Mapper&quot;</span><span class="p">)</span>
        <span class="n">act</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">roi_angle_mapper</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_app_state</span> <span class="o">=</span> <span class="n">wiser</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">roi_angle_mapper</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dataset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_app_state</span><span class="o">.</span><span class="n">choose_dataset_ui</span><span class="p">()</span>
        <span class="n">roi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_app_state</span><span class="o">.</span><span class="n">choose_roi_ui</span><span class="p">()</span>

        <span class="n">mean_roi_spec</span> <span class="o">=</span> <span class="n">calc_roi_spectrum</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><span class="n">dataset</span><span class="p">,</span> <span class="n">roi</span><span class="o">=</span><span class="n">roi</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">SpectrumAverageMode</span><span class="o">.</span><span class="n">MEAN</span><span class="p">)</span>

        <span class="n">image_arr</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">get_image_data</span><span class="p">()</span>

        <span class="c1"># Do some math</span>
        
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Extending WISER</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="plugins.html">WISER Plugins Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="ctxmenu_plugins.html">Context-Menu Plugins</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tools-Menu Plugins</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#wiser.plugins.ToolsMenuPlugin"><code class="docutils literal notranslate"><span class="pre">ToolsMenuPlugin</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-tools-menu-plugin">Example Tools-Menu Plugin</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ui_plugins.html">GUI Plugins in WISER</a></li>
<li class="toctree-l1"><a class="reference internal" href="bandmath_plugins.html">Band-Math Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugin_utilities.html">Plugin Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugin_dependencies.html">Plugin Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="wiser_state.html">Accessing and Modifying WISER State</a></li>
<li class="toctree-l1"><a class="reference internal" href="supporting_types.html">Supporting Types</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="ctxmenu_plugins.html" title="previous chapter">Context-Menu Plugins</a></li>
      <li>Next: <a href="ui_plugins.html" title="next chapter">GUI Plugins in WISER</a></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2021, California Institute of Technology.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.4.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/toolsmenu_plugins.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>